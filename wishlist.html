<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wishlist</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col items-center justify-center">
  <div class="bg-white rounded-lg shadow-lg p-8 w-full max-w-lg">
    <h1 class="text-2xl font-bold mb-4 text-center">Your Wishlist</h1>
    <div id="wishlistItems" class="space-y-4"></div>
    <a href="index.html" class="block mt-6 text-blue-600 hover:underline text-center">Back to Home</a>
  </div>
  <script>
    const PRODUCTS = JSON.parse(localStorage.getItem('productsCache')) || [];
    const wishlist = JSON.parse(localStorage.getItem('wishlist') || '[]');
    function renderWishlist() {
      const container = document.getElementById('wishlistItems');
      if (wishlist.length === 0) {
        container.innerHTML = '<div class="text-gray-400 text-center">Your wishlist is empty.</div>';
        return;
      }
      container.innerHTML = wishlist.map(id => {
        const prod = PRODUCTS.find(p => p.id === id);
        if (!prod) return '';
        return `<div class='flex items-center gap-4 bg-gray-100 rounded p-4'>
          <img src='${prod.image_url}' alt='${prod.name}' class='w-16 h-16 object-cover rounded'>
          <div>
            <div class='font-semibold text-lg'>${prod.name}</div>
            <div class='text-gray-500'>${prod.category}</div>
            <div class='text-blue-600 font-bold'>â‚¹${prod.price.toFixed(2)}</div>
          </div>
        </div>`;
      }).join('');
    }
    // Cache products if not already
    if (!PRODUCTS.length && window.opener && window.opener.PRODUCTS) {
      localStorage.setItem('productsCache', JSON.stringify(window.opener.PRODUCTS));
      location.reload();
    } else {
      renderWishlist();
    }
  </script>
</body>
</html>
